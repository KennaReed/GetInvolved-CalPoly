"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("file-selector");function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}exports.useFilePicker=function(r){var i=r.accept,o=void 0===i?"*":i,a=r.multiple,c=void 0===a||a,l=r.readAs,u=void 0===l?"Text":l,f=r.minFileSize,s=r.maxFileSize,d=e.useState([]),v=d[0],m=d[1],p=e.useState([]),S=p[0],h=p[1],y=e.useState([]),z=y[0],g=y[1],E=e.useState(!1),O=E[0],j=E[1];return e.useEffect((function(){if(0!==v.length){j(!0);var e=v.map((function(e){return new Promise((function(n,r){var i=new FileReader;i["readAs"+u].call(i,e),i.onload=function(){f&&e.size<1e6*f&&o({fileSizeTooSmall:!0}),s&&e.size>1e6*s&&o({fileSizeToolarge:!0}),n({content:i.result,name:e.name,lastModified:e.lastModified})},i.onerror=function(){o({readerError:i.error})};var o=function(n){var i=n.name,o=void 0===i?e.name:i,a=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n.indexOf(t=o[r])>=0||(i[t]=e[t]);return i}(n,["name"]);r(t({name:o,fileSizeToolarge:!1,fileSizeTooSmall:!1},a))}}))}));Promise.all(e).then((function(e){h(e),g([])})).catch((function(e){g((function(n){return[e].concat(n)}))})).finally((function(){return j(!1)}))}else h([])}),[v]),[S,z,function(){!function(e,t,r){var i=document.createElement("input");i.type="file",i.accept=e,i.multiple=t,i.addEventListener("change",(function(e){n.fromEvent(e).then((function(e){m(e)}))})),i.dispatchEvent(new MouseEvent("click"))}(o instanceof Array?o.join(","):o,c)},O]};
//# sourceMappingURL=use-file-picker.cjs.production.min.js.map
