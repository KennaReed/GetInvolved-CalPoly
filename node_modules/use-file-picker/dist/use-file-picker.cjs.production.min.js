"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("file-selector");function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}exports.useFilePicker=function(i){var r=i.accept,o=void 0===r?"*":r,a=i.multiple,c=void 0===a||a,u=i.readAs,l=void 0===u?"Text":u,f=i.minFileSize,s=i.maxFileSize,m=i.limitFilesConfig,d=e.useState([]),v=d[0],p=d[1],h=e.useState([]),S=h[0],g=h[1],x=e.useState([]),y=x[0],z=x[1],E=e.useState(!1),O=E[0],j=E[1];return e.useEffect((function(){if(0!==v.length){if(m){if(m.max&&v.length>m.max)return void z((function(e){return[{maxLimitExceeded:!0}].concat(e)}));if(m.min&&v.length<m.min)return void z((function(e){return[{minLimitNotReached:!0}].concat(e)}))}j(!0);var e=v.map((function(e){return new Promise((function(n,i){var r=new FileReader;r["readAs"+l].call(r,e),r.onload=function(){f&&e.size<1e6*f&&o({fileSizeTooSmall:!0}),s&&e.size>1e6*s&&o({fileSizeToolarge:!0}),n({content:r.result,name:e.name,lastModified:e.lastModified})},r.onerror=function(){o({readerError:r.error})};var o=function(n){var r=n.name,o=void 0===r?e.name:r,a=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n.indexOf(t=o[i])>=0||(r[t]=e[t]);return r}(n,["name"]);i(t({name:o,fileSizeToolarge:!1,fileSizeTooSmall:!1},a))}}))}));Promise.all(e).then((function(e){g(e),z([])})).catch((function(e){z((function(n){return[e].concat(n)}))})).finally((function(){return j(!1)}))}else g([])}),[v]),[S,y,function(){!function(e,t,i){var r=document.createElement("input");r.type="file",r.accept=e,r.multiple=t,r.addEventListener("change",(function(e){n.fromEvent(e).then((function(e){p(e)}))})),r.dispatchEvent(new MouseEvent("click"))}(o instanceof Array?o.join(","):o,c)},O]};
//# sourceMappingURL=use-file-picker.cjs.production.min.js.map
